# LifeManager å°ˆæ¡ˆæ¶æ§‹æŒ‡å—

> æœ¬æ–‡ä»¶æ—¨åœ¨å¹«åŠ©é–‹ç™¼è€…å¿«é€Ÿç†è§£å°ˆæ¡ˆçµæ§‹ï¼Œä¸¦çŸ¥é“åœ¨å“ªè£¡é€²è¡Œä¿®æ”¹ã€‚

## ç›®éŒ„

1. [æŠ€è¡“æ£§æ¦‚è¦½](#æŠ€è¡“æ£§æ¦‚è¦½)
2. [å°ˆæ¡ˆæ¶æ§‹](#å°ˆæ¡ˆæ¶æ§‹)
3. [å¥—ä»¶çµæ§‹è©³è§£](#å¥—ä»¶çµæ§‹è©³è§£)
4. [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
5. [å¸¸è¦‹ä¿®æ”¹å ´æ™¯](#å¸¸è¦‹ä¿®æ”¹å ´æ™¯)
6. [è³‡æ–™æµå‘](#è³‡æ–™æµå‘)
7. [æ¸¬è©¦](#æ¸¬è©¦)
8. [å»ºç½®èˆ‡åŸ·è¡Œ](#å»ºç½®èˆ‡åŸ·è¡Œ)

---

## æŠ€è¡“æ£§æ¦‚è¦½

| æŠ€è¡“ | ç”¨é€” | èªªæ˜ |
|------|------|------|
| **Kotlin** | ç¨‹å¼èªè¨€ | Android å®˜æ–¹æ¨è–¦èªè¨€ï¼Œæ¯” Java æ›´ç°¡æ½” |
| **Jetpack Compose** | UI æ¡†æ¶ | å®£å‘Šå¼ UIï¼Œç”¨å‡½æ•¸æè¿°ç•«é¢ |
| **Hilt** | ä¾è³´æ³¨å…¥ | è‡ªå‹•ç®¡ç†ç‰©ä»¶çš„å»ºç«‹å’Œç”Ÿå‘½é€±æœŸ |
| **Room** | è³‡æ–™åº« | SQLite çš„æŠ½è±¡å±¤ï¼Œç”¨è¨»è§£å®šç¾©è³‡æ–™è¡¨ |
| **Coroutines + Flow** | éåŒæ­¥è™•ç† | è™•ç†èƒŒæ™¯ä»»å‹™å’Œè³‡æ–™æµ |
| **Navigation Compose** | å°èˆª | ç®¡ç†ç•«é¢ä¹‹é–“çš„åˆ‡æ› |

---

## å°ˆæ¡ˆæ¶æ§‹

æœ¬å°ˆæ¡ˆæ¡ç”¨ **MVVM + Repository + Feature-based** æ¶æ§‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UI Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ScheduleScreenâ”‚  â”‚ LockScreen  â”‚  â”‚TaskDetailScreenâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                â”‚                â”‚                 â”‚
â”‚         â–¼                â–¼                â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              ScheduleViewModel                   â”‚       â”‚
â”‚  â”‚         (UiState + UiEvent + SideEffect)        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Domain Layer                               â”‚
â”‚                          â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚            TaskRepository (Interface)        â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Layer                                â”‚
â”‚                          â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚          TaskRepositoryImpl                  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚     TaskDao (Room) â†â†’ TaskEntity            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ

1. **åˆ†å±¤æ¶æ§‹**ï¼šæ¯å±¤åªä¾è³´ä¸‹ä¸€å±¤ï¼Œä¿®æ”¹ä¸€å±¤ä¸å½±éŸ¿å…¶ä»–å±¤
2. **Feature-based**ï¼šæ¯å€‹åŠŸèƒ½ç¨ç«‹ï¼Œæ–°å¢/åˆªé™¤åŠŸèƒ½ä¸å½±éŸ¿å…¶ä»–åŠŸèƒ½
3. **å–®å‘è³‡æ–™æµ**ï¼šè³‡æ–™åªèƒ½å¾ ViewModel â†’ UIï¼Œäº‹ä»¶åªèƒ½å¾ UI â†’ ViewModel

---

## å¥—ä»¶çµæ§‹è©³è§£

```
app/src/main/java/com/example/lifemanager/
â”‚
â”œâ”€â”€ MainActivity.kt              # App å…¥å£é»ï¼Œè™•ç† Intent
â”œâ”€â”€ LifeManagerApplication.kt    # Application é¡åˆ¥ï¼ŒHilt åˆå§‹åŒ–
â”‚
â”œâ”€â”€ core/                        # æ ¸å¿ƒæ¨¡çµ„ï¼ˆè¢«å¤šå€‹ feature å…±ç”¨ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                  # é ˜åŸŸå±¤
â”‚   â”‚   â””â”€â”€ model/
â”‚   â”‚       â””â”€â”€ Task.kt          # â­ ä»»å‹™çš„è³‡æ–™æ¨¡å‹å’Œç‹€æ…‹
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                    # è³‡æ–™å±¤
â”‚   â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â”‚   â”œâ”€â”€ AppDatabase.kt   # Room è³‡æ–™åº«è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskDao.kt       # è³‡æ–™åº«æ“ä½œä»‹é¢
â”‚   â”‚   â”‚   â””â”€â”€ entity/
â”‚   â”‚   â”‚       â””â”€â”€ TaskEntity.kt # è³‡æ–™åº«å¯¦é«”ï¼ˆå°æ‡‰è³‡æ–™è¡¨ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â”œâ”€â”€ TaskRepository.kt     # Repository ä»‹é¢
â”‚   â”‚       â””â”€â”€ TaskRepositoryImpl.kt # Repository å¯¦ä½œ
â”‚   â”‚
â”‚   â”œâ”€â”€ di/                      # ä¾è³´æ³¨å…¥æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ DatabaseModule.kt    # æä¾› Database å’Œ DAO
â”‚   â”‚   â”œâ”€â”€ RepositoryModule.kt  # æä¾› Repository
â”‚   â”‚   â””â”€â”€ AlarmModule.kt       # æä¾› AlarmScheduler
â”‚   â”‚
â”‚   â””â”€â”€ designsystem/            # è¨­è¨ˆç³»çµ±
â”‚       â””â”€â”€ theme/
â”‚           â”œâ”€â”€ Color.kt         # â­ é¡è‰²å®šç¾©
â”‚           â”œâ”€â”€ Theme.kt         # â­ ä¸»é¡Œè¨­å®š
â”‚           â””â”€â”€ Type.kt          # â­ å­—å‹è¨­å®š
â”‚
â”œâ”€â”€ feature/                     # åŠŸèƒ½æ¨¡çµ„
â”‚   â”‚
â”‚   â”œâ”€â”€ schedule/                # ğŸ“… è¡Œç¨‹è¡¨åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ ScheduleScreen.kt    # è¡Œç¨‹è¡¨ç•«é¢
â”‚   â”‚   â”œâ”€â”€ ScheduleViewModel.kt # è¡Œç¨‹è¡¨é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ ScheduleUiState.kt   # UI ç‹€æ…‹å®šç¾©
â”‚   â”‚   â””â”€â”€ component/           # UI å…ƒä»¶
â”‚   â”‚       â”œâ”€â”€ DateHeader.kt    # æ—¥æœŸåˆ‡æ›å…ƒä»¶
â”‚   â”‚       â”œâ”€â”€ TimeTable.kt     # æ™‚é–“è¡¨æ ¼
â”‚   â”‚       â”œâ”€â”€ TaskBlock.kt     # â­ ä»»å‹™æ–¹å¡Šæ¨£å¼
â”‚   â”‚       â””â”€â”€ AddTaskDialog.kt # â­ æ–°å¢ä»»å‹™å°è©±æ¡†
â”‚   â”‚
â”‚   â”œâ”€â”€ lock/                    # ğŸ”’ é–å®šåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ LockScreen.kt        # é–å®šç•«é¢ UI
â”‚   â”‚   â””â”€â”€ LockService.kt       # â­ é–å®šæœå‹™ï¼ˆå« DEBUG è§£é–æŒ‰éˆ•ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ taskdetail/              # ğŸ“‹ ä»»å‹™è©³æƒ…
â”‚   â”‚   â””â”€â”€ TaskDetailScreen.kt  # ä»»å‹™è©³æƒ…ç•«é¢
â”‚   â”‚
â”‚   â””â”€â”€ worklog/                 # ğŸ“ å·¥ä½œç´€éŒ„
â”‚       â””â”€â”€ WorkLogScreen.kt     # å·¥ä½œç´€éŒ„å¡«å¯«ç•«é¢
â”‚
â”œâ”€â”€ alarm/                       # â° é¬§é˜ç›¸é—œ
â”‚   â”œâ”€â”€ AlarmScheduler.kt        # æ’ç¨‹é¬§é˜
â”‚   â”œâ”€â”€ TaskAlarmReceiver.kt     # æ¥æ”¶é¬§é˜å»£æ’­
â”‚   â””â”€â”€ BootReceiver.kt          # é–‹æ©Ÿå¾Œé‡æ–°æ’ç¨‹
â”‚
â””â”€â”€ navigation/                  # ğŸ§­ å°èˆª
    â”œâ”€â”€ Routes.kt                # è·¯ç”±å¸¸æ•¸å®šç¾©
    â””â”€â”€ NavGraph.kt              # å°èˆªåœ–è¨­å®š
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### 1. UiState + UiEvent æ¨¡å¼

```kotlin
// ğŸ“ ä½ç½®ï¼šfeature/schedule/ScheduleUiState.kt

// UiStateï¼šæè¿°ç•«é¢çš„ã€Œç‹€æ…‹ã€
data class ScheduleUiState(
    val tasks: List<Task>,           // ä»»å‹™åˆ—è¡¨
    val selectedDate: Long,          // é¸ä¸­çš„æ—¥æœŸ
    val isLoading: Boolean,          // æ˜¯å¦è¼‰å…¥ä¸­
    val showAddTaskDialog: Boolean,  // æ˜¯å¦é¡¯ç¤ºæ–°å¢å°è©±æ¡†
    val error: String?               // éŒ¯èª¤è¨Šæ¯
)

// UiEventï¼šæè¿°ä½¿ç”¨è€…çš„ã€Œå‹•ä½œã€
sealed interface ScheduleUiEvent {
    data class SelectDate(val date: Long) : ScheduleUiEvent
    data object ShowAddTaskDialog : ScheduleUiEvent
    // ...
}
```

**ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ**
- UI åªéœ€è¦é—œå¿ƒã€Œé¡¯ç¤ºä»€éº¼ã€ï¼Œä¸éœ€è¦çŸ¥é“ã€Œå¦‚ä½•å–å¾—è³‡æ–™ã€
- æ‰€æœ‰ç‹€æ…‹é›†ä¸­ç®¡ç†ï¼Œé¿å…ç‹€æ…‹ä¸ä¸€è‡´
- äº‹ä»¶é©…å‹•ï¼Œå®¹æ˜“è¿½è¹¤ä½¿ç”¨è€…æ“ä½œ

### 2. Repository æ¨¡å¼

```kotlin
// ğŸ“ ä½ç½®ï¼šcore/data/repository/

// ä»‹é¢ï¼ˆæŠ½è±¡ï¼‰
interface TaskRepository {
    fun getTasksForDate(date: Long): Flow<List<Task>>
    suspend fun createTask(...): Task
}

// å¯¦ä½œï¼ˆå…·é«”ï¼‰
class TaskRepositoryImpl(private val taskDao: TaskDao) : TaskRepository {
    override fun getTasksForDate(date: Long) = 
        taskDao.getTasksByDate(date).map { ... }
}
```

**ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ**
- ViewModel ä¸ç›´æ¥æ“ä½œè³‡æ–™åº«ï¼Œè€Œæ˜¯é€é Repository
- æ–¹ä¾¿æ¸¬è©¦ï¼ˆå¯ä»¥ mock Repositoryï¼‰
- æœªä¾†å¯ä»¥è¼•é¬†åˆ‡æ›è³‡æ–™ä¾†æºï¼ˆä¾‹å¦‚æ”¹ç”¨ APIï¼‰

### 3. Hilt ä¾è³´æ³¨å…¥

```kotlin
// ğŸ“ ä½ç½®ï¼šcore/di/

@Module
@InstallIn(SingletonComponent::class)
object DatabaseModule {
    @Provides
    @Singleton
    fun provideDatabase(context: Context): AppDatabase = ...
}
```

**ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Ÿ**
- ä¸éœ€è¦æ‰‹å‹• `new` ç‰©ä»¶ï¼ŒHilt è‡ªå‹•å»ºç«‹ä¸¦æ³¨å…¥
- ç¢ºä¿å–®ä¾‹ï¼ˆSingletonï¼‰åªæœ‰ä¸€å€‹å¯¦ä¾‹
- æ–¹ä¾¿æ¸¬è©¦æ™‚æ›¿æ›ä¾è³´

---

## å¸¸è¦‹ä¿®æ”¹å ´æ™¯

### ğŸ¨ UI æ¨£å¼ç›¸é—œ

| ä¿®æ”¹é …ç›® | æª”æ¡ˆä½ç½® | èªªæ˜ |
|---------|---------|------|
| App ä¸»é¡Œé¡è‰² | `core/designsystem/theme/Color.kt` | Arctic Night å†·å†½é…è‰² |
| æ·±è‰²/æ·ºè‰²æ¨¡å¼ | `core/designsystem/theme/Theme.kt` | DarkColorScheme / LightColorScheme |
| å­—å‹å¤§å° | `core/designsystem/theme/Type.kt` | Typography è¨­å®š |
| ä»»å‹™é¡è‰²é¸é … | `core/designsystem/theme/Color.kt` | `TaskColorOptions` åˆ—è¡¨ |
| ä»»å‹™æ–¹å¡Šæ¨£å¼ | `feature/schedule/component/TaskBlock.kt` | Card æ¨£å¼ã€åœ“è§’ã€é™°å½± |
| æ–°å¢ä»»å‹™å°è©±æ¡† | `feature/schedule/component/AddTaskDialog.kt` | å°è©±æ¡†å…§å®¹å’Œæ¨£å¼ |
| æ™‚é–“è¡¨æ ¼æ ¼ç·š | `feature/schedule/component/TimeTable.kt` | Grid lines é¡è‰²å’Œé–“è· |
| é–å®šç•«é¢æ¨£å¼ | `feature/lock/LockScreen.kt` | èƒŒæ™¯è‰²ã€æ–‡å­— |

### ğŸ”§ åŠŸèƒ½ç›¸é—œ

| ä¿®æ”¹é …ç›® | æª”æ¡ˆä½ç½® | èªªæ˜ |
|---------|---------|------|
| ä¿®æ”¹é–å®šç•«é¢ UI | `feature/lock/LockService.kt` | `showLockWindow()` æ–¹æ³• |
| èª¿æ•´è‡ªå‹•è§£é–æ™‚é–“ | `feature/lock/LockService.kt` | `startCountdownTimer()` æ–¹æ³• |
| æ–°å¢ä»»å‹™æ¬„ä½ | `core/domain/model/Task.kt` | æ–°å¢å±¬æ€§ |
| ä¿®æ”¹ä»»å‹™ç‹€æ…‹ | `core/domain/model/Task.kt` | `TaskStatus` enum |
| é¬§é˜è§¸ç™¼é‚è¼¯ | `alarm/TaskAlarmReceiver.kt` | `onReceive()` |
| é€šçŸ¥æ¨£å¼ | `alarm/TaskAlarmReceiver.kt` | `showFullScreenNotification()` |
| å°èˆªè·¯ç”± | `navigation/Routes.kt` | æ–°å¢è·¯ç”±å¸¸æ•¸ |
| ç•«é¢è·³è½‰é‚è¼¯ | `navigation/NavGraph.kt` | `NavHost` composable |

### ğŸ“Š è³‡æ–™ç›¸é—œ

| ä¿®æ”¹é …ç›® | æª”æ¡ˆä½ç½® | èªªæ˜ |
|---------|---------|------|
| è³‡æ–™åº«æ¬„ä½ | `core/data/local/entity/TaskEntity.kt` | æ–°å¢ @ColumnInfo |
| è³‡æ–™åº«æŸ¥è©¢ | `core/data/local/TaskDao.kt` | æ–°å¢ @Query |
| è³‡æ–™åº«ç‰ˆæœ¬å‡ç´š | `core/data/local/AppDatabase.kt` | ä¿®æ”¹ version |
| æ¥­å‹™é‚è¼¯ | `core/data/repository/TaskRepositoryImpl.kt` | Repository æ–¹æ³• |

---

## è³‡æ–™æµå‘

### æ–°å¢ä»»å‹™æµç¨‹

```
ä½¿ç”¨è€…é»æ“Š FAB
       â”‚
       â–¼
ScheduleScreen: viewModel.onEvent(ShowAddTaskDialog)
       â”‚
       â–¼
ScheduleViewModel: _showAddTaskDialog.value = true
       â”‚
       â–¼
UiState æ›´æ–° â†’ UI é‡æ–°çµ„åˆ â†’ é¡¯ç¤º AddTaskDialog
       â”‚
       â–¼
ä½¿ç”¨è€…å¡«å¯«è¡¨å–®ï¼Œé»æ“Šã€Œæ–°å¢ã€
       â”‚
       â–¼
viewModel.onEvent(CreateTask(...))
       â”‚
       â–¼
ScheduleViewModel.createTask():
    repository.createTask(...)  â†â”€ å„²å­˜åˆ°è³‡æ–™åº«
    alarmScheduler.schedule(...) â†â”€ è¨­å®šé¬§é˜
       â”‚
       â–¼
Flow<List<Task>> è‡ªå‹•æ›´æ–° â†’ UiState.tasks æ›´æ–° â†’ UI é¡¯ç¤ºæ–°ä»»å‹™
```

### é¬§é˜è§¸ç™¼èˆ‡è‡ªå‹•è§£é–æµç¨‹

```
ç³»çµ±æ™‚é–“åˆ°é”ï¼ˆä»»å‹™é–‹å§‹æ™‚é–“ï¼‰
       â”‚
       â–¼
AlarmManager è§¸ç™¼ â†’ TaskAlarmReceiver.onReceive()
       â”‚
       â”œâ”€â”€â†’ é¡¯ç¤ºå…¨è¢å¹•é€šçŸ¥ï¼ˆå«ä»»å‹™åç¨±ï¼‰
       â”‚
       â””â”€â”€â†’ å•Ÿå‹• LockServiceï¼ˆå‚³é taskId, duration, titleï¼‰
              â”‚
              â–¼
       LockService.showLockWindow()
              â”‚
              â”œâ”€â”€â†’ é¡¯ç¤º Overlay é–å®šç•«é¢ï¼ˆå«å€’æ•¸è¨ˆæ™‚ï¼‰
              â”‚
              â””â”€â”€â†’ å•Ÿå‹• CountDownTimerï¼ˆæ ¹æ“š plannedDurationMinutesï¼‰
                     â”‚
                     â”‚ (æ¯ç§’æ›´æ–°å‰©é¤˜æ™‚é–“é¡¯ç¤º)
                     â”‚
                     â–¼ (å€’æ•¸çµæŸ)
              completeTaskAndUnlock()
                     â”‚
                     â–¼
              ç™¼é€ Intent åˆ° MainActivity
                     â”‚
                     â–¼
              NavGraph å°èˆªåˆ° WorkLogScreenï¼ˆå¡«å¯«ä»»å‹™ç´€éŒ„ï¼‰
```

**é‡è¦**ï¼šé–å®šç•«é¢æœƒåœ¨ä»»å‹™é å®šæ™‚é•·çµæŸå¾Œ**è‡ªå‹•è§£é–**ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œã€‚

---

## é—œéµæª”æ¡ˆé€ŸæŸ¥

### æœ€å¸¸ä¿®æ”¹çš„æª”æ¡ˆ

```
feature/lock/LockService.kt        â† é–å®šç•«é¢é‚è¼¯ã€å€’æ•¸è¨ˆæ™‚ã€è‡ªå‹•è§£é–
feature/schedule/component/*.kt    â† UI å…ƒä»¶åœ¨é€™è£¡
core/designsystem/theme/*.kt       â† é¡è‰²ã€ä¸»é¡Œåœ¨é€™è£¡
core/domain/model/Task.kt          â† è³‡æ–™æ¨¡å‹åœ¨é€™è£¡
```

### å„åŠŸèƒ½çš„å…¥å£é»

```
è¡Œç¨‹è¡¨ç•«é¢  â†’ feature/schedule/ScheduleScreen.kt
é–å®šç•«é¢    â†’ feature/lock/LockScreen.kt (Compose UI)
           â†’ feature/lock/LockService.kt (Overlay æœå‹™)
ä»»å‹™è©³æƒ…    â†’ feature/taskdetail/TaskDetailScreen.kt
å·¥ä½œç´€éŒ„    â†’ feature/worklog/WorkLogScreen.kt
```

---

## æ¸¬è©¦

### åŸ·è¡Œæ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰å–®å…ƒæ¸¬è©¦
./gradlew test

# åŸ·è¡Œç¨‹å¼ç¢¼é¢¨æ ¼æª¢æŸ¥
./gradlew ktlintCheck

# åŸ·è¡Œç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥
./gradlew detekt
```

### æ¸¬è©¦æª”æ¡ˆä½ç½®

```
app/src/test/java/com/example/lifemanager/
â”œâ”€â”€ feature/schedule/
â”‚   â””â”€â”€ ScheduleViewModelTest.kt    â† ViewModel æ¸¬è©¦
â””â”€â”€ core/data/repository/
    â””â”€â”€ TaskRepositoryImplTest.kt   â† Repository æ¸¬è©¦
```

---

## å»ºç½®èˆ‡åŸ·è¡Œ

### ç’°å¢ƒéœ€æ±‚

- Android Studio Hedgehog (2023.1.1) æˆ–æ›´æ–°
- JDK 17
- Android SDK 36 (compileSdk)
- Android SDK 26 (minSdk)

### å¸¸ç”¨æŒ‡ä»¤

```bash
# å»ºç½® Debug APK
./gradlew assembleDebug

# å®‰è£åˆ°é€£æ¥çš„è£ç½®
./gradlew installDebug

# æ¸…é™¤å»ºç½®å¿«å–
./gradlew clean
```

### APK ä½ç½®

```
app/build/outputs/apk/debug/app-debug.apk
```

---

## é™„éŒ„ï¼šCompose èªæ³•é€ŸæŸ¥

```kotlin
// å…ƒä»¶å®šç¾©
@Composable
fun MyScreen() {
    // UI æè¿°
}

// ç‹€æ…‹ç®¡ç†
var count by remember { mutableStateOf(0) }

// è§€å¯Ÿ ViewModel ç‹€æ…‹
val uiState by viewModel.uiState.collectAsStateWithLifecycle()

// å‰¯ä½œç”¨ï¼ˆä¸€æ¬¡æ€§æ“ä½œï¼‰
LaunchedEffect(key) {
    // åœ¨ key æ”¹è®Šæ™‚åŸ·è¡Œ
}

// ä½ˆå±€
Column { }   // å‚ç›´æ’åˆ—
Row { }      // æ°´å¹³æ’åˆ—
Box { }      // å †ç–Š
Scaffold { } // åŒ…å« TopBarã€FABã€BottomBar çš„è…³æ‰‹æ¶
```

---

## éœ€è¦å¹«åŠ©ï¼Ÿ

1. å…ˆç¢ºèªè¦ä¿®æ”¹çš„åŠŸèƒ½å±¬æ–¼å“ªå€‹ feature
2. æ‰¾åˆ°å°æ‡‰çš„ Screen å’Œ ViewModel
3. è¿½è¹¤è³‡æ–™æµå‘ï¼Œç†è§£é‚è¼¯
4. ä¿®æ”¹å¾ŒåŸ·è¡Œ `./gradlew test` ç¢ºä¿æ²’æœ‰ç ´å£æ—¢æœ‰åŠŸèƒ½

---

*æœ€å¾Œæ›´æ–°ï¼š2026-01-21*

